# WageRegression
-------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  H:\WageRegressionResults__(2).log
  log type:  text
 opened on:  24 May 2019, 22:18:25

. *(17 variables, 2010 observations pasted into data editor)

. *Analyzing how wages and logarithmic wages are affected by education, experience, race etc.

. 
. *Data contains over 2000 observations in year 1992

. 
. *Generating variables

. 
. gen log_wage = log(wage)

. 
. gen age = 1992-yrbirth

. 
. gen married = curmar==1

. 
. gen white = race==0

. 
. *To analyze the effect of father's education on wage; must drop observations where feduc is not observed

. 
. drop if feduc == .
(89 observations deleted)

. 
. *Distribution graphs

. 
. graph pie, over(race) title(Distribution of Race)

. 
. graph bar (count), over(school) title(Distribution of Years of Schooling)

. 
. twoway (scatter log_wage school), title(Years of Schooling and Log Wage)

. 
. graph save Graph "H:\YearsOfSchooling_LogWage_WRR(4).gph"
(file H:\YearsOfSchooling_LogWage_WRR(4).gph saved)

. 
. *Regression Analysis

. 
. *Regressing wage; (1) school, (2) school and experience, (3) school experience and fathers education

. 
. regress wage school

      Source |       SS           df       MS      Number of obs   =     1,921
-------------+----------------------------------   F(1, 1919)      =    105.32
       Model |  40183.5812         1  40183.5812   Prob > F        =    0.0000
    Residual |  732188.415     1,919  381.546855   R-squared       =    0.0520
-------------+----------------------------------   Adj R-squared   =    0.0515
       Total |  772371.996     1,920  402.277081   Root MSE        =    19.533

------------------------------------------------------------------------------
      wagert |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      school |   2.031935   .1979974    10.26   0.000     1.643622    2.420248
       _cons |  -8.707106   2.744283    -3.17   0.002     -14.0892   -3.325015
------------------------------------------------------------------------------

. regress wage school jobten

      Source |       SS           df       MS      Number of obs   =     1,516
-------------+----------------------------------   F(2, 1513)      =     61.14
       Model |  37256.5997         2  18628.2999   Prob > F        =    0.0000
    Residual |  460986.413     1,513  304.683683   R-squared       =    0.0748
-------------+----------------------------------   Adj R-squared   =    0.0736
       Total |  498243.013     1,515  328.873276   Root MSE        =    17.455

------------------------------------------------------------------------------
      wagert |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      school |   1.843056   .1994114     9.24   0.000     1.451904    2.234208
      jobten |   .0309208   .0052038     5.94   0.000     .0207133    .0411283
       _cons |  -9.004081   2.796202    -3.22   0.001    -14.48892   -3.519237
------------------------------------------------------------------------------

. regress wage school jobten feduc

      Source |       SS           df       MS      Number of obs   =     1,516
-------------+----------------------------------   F(3, 1512)      =     40.74
       Model |  37262.4543         3  12420.8181   Prob > F        =    0.0000
    Residual |  460980.558     1,512  304.881322   R-squared       =    0.0748
-------------+----------------------------------   Adj R-squared   =    0.0730
       Total |  498243.013     1,515  328.873276   Root MSE        =    17.461

------------------------------------------------------------------------------
      wagert |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      school |   1.832535   .2134365     8.59   0.000     1.413872    2.251198
      jobten |   .0310379   .0052737     5.89   0.000     .0206934    .0413824
       feduc |    .058896   .4250155     0.14   0.890    -.7747864    .8925785
       _cons |   -9.09003    2.86505    -3.17   0.002    -14.70992   -3.470135
------------------------------------------------------------------------------

. *Running regressions on log wage, to interpret results via percent changes

. regress log_wage school

      Source |       SS           df       MS      Number of obs   =     1,921
-------------+----------------------------------   F(1, 1919)      =    199.75
       Model |   113.18994         1   113.18994   Prob > F        =    0.0000
    Residual |  1087.43649     1,919   .56666831   R-squared       =    0.0943
-------------+----------------------------------   Adj R-squared   =    0.0938
       Total |  1200.62643     1,920  .625326264   Root MSE        =    .75277

------------------------------------------------------------------------------
    log_wage |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      school |   .1078424   .0076304    14.13   0.000     .0928775    .1228072
       _cons |   1.186182   .1057595    11.22   0.000     .9787668    1.393598
------------------------------------------------------------------------------

. regress log_wage school age

      Source |       SS           df       MS      Number of obs   =     1,921
-------------+----------------------------------   F(2, 1918)      =    139.44
       Model |  152.411384         2  76.2056921   Prob > F        =    0.0000
    Residual |  1048.21504     1,918  .546514621   R-squared       =    0.1269
-------------+----------------------------------   Adj R-squared   =    0.1260
       Total |  1200.62643     1,920  .625326264   Root MSE        =    .73927

------------------------------------------------------------------------------
    log_wage |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      school |   .0984511   .0075751    13.00   0.000     .0835949    .1133074
         age |   .0183295   .0021637     8.47   0.000     .0140862    .0225729
       _cons |   .6413016   .1221648     5.25   0.000     .4017118    .8808913
------------------------------------------------------------------------------

. regress log_wage school age feduc

      Source |       SS           df       MS      Number of obs   =     1,921
-------------+----------------------------------   F(3, 1917)      =     95.78
       Model |  156.510067         3  52.1700224   Prob > F        =    0.0000
    Residual |  1044.11636     1,917  .544661638   R-squared       =    0.1304
-------------+----------------------------------   Adj R-squared   =    0.1290
       Total |  1200.62643     1,920  .625326264   Root MSE        =    .73801

------------------------------------------------------------------------------
    log_wage |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      school |   .0888118   .0083388    10.65   0.000     .0724578    .1051658
         age |   .0204472   .0022938     8.91   0.000     .0159486    .0249458
       feduc |   .0457982   .0166951     2.74   0.006     .0130557    .0785408
       _cons |   .5251894   .1290939     4.07   0.000     .2720102    .7783685
------------------------------------------------------------------------------

. regress log_wage school age feduc white

      Source |       SS           df       MS      Number of obs   =     1,921
-------------+----------------------------------   F(4, 1916)      =     72.92
       Model |  158.628386         4  39.6570965   Prob > F        =    0.0000
    Residual |  1041.99804     1,916  .543840314   R-squared       =    0.1321
-------------+----------------------------------   Adj R-squared   =    0.1303
       Total |  1200.62643     1,920  .625326264   Root MSE        =    .73746

------------------------------------------------------------------------------
    log_wage |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      school |   .0886224    .008333    10.64   0.000     .0722797    .1049652
         age |   .0201803   .0022961     8.79   0.000     .0156772    .0246833
       feduc |   .0415893   .0168183     2.47   0.013     .0086052    .0745734
       white |   .1361267   .0689737     1.97   0.049     .0008553    .2713981
       _cons |   .4259528   .1384499     3.08   0.002     .1544245     .697481
------------------------------------------------------------------------------

. regress log_wage school age feduc white married

      Source |       SS           df       MS      Number of obs   =     1,921
-------------+----------------------------------   F(5, 1915)      =     61.64
       Model |  166.430653         5  33.2861306   Prob > F        =    0.0000
    Residual |  1034.19577     1,915  .540050013   R-squared       =    0.1386
-------------+----------------------------------   Adj R-squared   =    0.1364
       Total |  1200.62643     1,920  .625326264   Root MSE        =    .73488

------------------------------------------------------------------------------
    log_wage |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      school |    .087784   .0083069    10.57   0.000     .0714926    .1040754
         age |   .0180204   .0023575     7.64   0.000     .0133967     .022644
       feduc |   .0426747    .016762     2.55   0.011      .009801    .0755484
       white |   .1122998   .0690182     1.63   0.104    -.0230589    .2476585
     married |   .1642468   .0432119     3.80   0.000     .0794994    .2489942
       _cons |   .4046169   .1380807     2.93   0.003     .1338126    .6754213
------------------------------------------------------------------------------

. summarize

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        year |      1,921        1992           0       1992       1992
       unqid |      1,921     1503799    827932.1       4003    2927030
        nkid |      1,921    1.615825     1.27158          0          7
        ngir |      1,921    .7933368     .899929          0          5
     yrbirth |      1,921    1955.266    7.882439       1924       1974
-------------+---------------------------------------------------------
     mnbirth |      1,921    6.548673    3.464229          1         12
        race |      1,921    .0822488    .3315091          0          2
       hours |      1,921    2200.648    698.9356         16       5840
      wagert |      1,921    19.08206    20.05685   .0054985   242.3469
      school |      1,921    13.67621    2.251458          6         17
-------------+---------------------------------------------------------
      jobten |      1,516     95.7091    86.18611          1        572
      posten |          0
      majocc |      1,827    3.835796    2.379487          1          9
      curmar |      1,921     1.38001    .8951817          1          5
       feduc |      1,921    3.715252    1.150915          1          5
-------------+---------------------------------------------------------
       meduc |      1,891    3.862507    .9361216          1          5
         cpi |      1,921       1.403           0      1.403      1.403
    log_wage |      1,921    2.661057    .7907757  -5.203274    5.49037
         age |      1,921    36.73399    7.882439         18         68
     married |      1,921    .7938574    .4046394          0          1
-------------+---------------------------------------------------------
       white |      1,921    .9349297     .246714          0          1

. *Running an instrumental variable analysis

. *Hypothesis: Years of schooling is correlated with ability, which is unobserved in the data

. *To get rid of omitted variable bias- instrument school with month of birth

. ivreg log_wage (school=mnbirth)

Instrumental variables (2SLS) regression

      Source |       SS           df       MS      Number of obs   =     1,921
-------------+----------------------------------   F(1, 1919)      =      0.01
       Model | -216429.985         1 -216429.985   Prob > F        =    0.9138
    Residual |  217630.612     1,919  113.408344   R-squared       =         .
-------------+----------------------------------   Adj R-squared   =         .
       Total |  1200.62643     1,920  .625326264   Root MSE        =    10.649

------------------------------------------------------------------------------
    log_wage |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      school |   4.824754    44.5636     0.11   0.914    -82.57342    92.22293
       _cons |  -63.32329   609.4612    -0.10   0.917    -1258.599    1131.953
------------------------------------------------------------------------------
Instrumented:  school
Instruments:   mnbirth
------------------------------------------------------------------------------

. ivreg log_wage age (school=mnbirth)

Instrumental variables (2SLS) regression

      Source |       SS           df       MS      Number of obs   =     1,921
-------------+----------------------------------   F(2, 1918)      =      0.38
       Model |  -151740.52         2 -75870.2598   Prob > F        =    0.6826
    Residual |  152941.146     1,918  79.7399093   R-squared       =         .
-------------+----------------------------------   Adj R-squared   =         .
       Total |  1200.62643     1,920  .625326264   Root MSE        =    8.9297

------------------------------------------------------------------------------
    log_wage |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      school |  -3.895064   38.60403    -0.10   0.920    -79.60535    71.81522
         age |   .1852588   1.613859     0.11   0.909    -2.979843    3.350361
       _cons |   49.12548    468.682     0.10   0.917    -870.0543    968.3053
------------------------------------------------------------------------------
Instrumented:  school
Instruments:   age mnbirth
------------------------------------------------------------------------------

. ivreg log_wage age feduc (school=mnbirth)

Instrumental variables (2SLS) regression

      Source |       SS           df       MS      Number of obs   =     1,921
-------------+----------------------------------   F(3, 1917)      =      4.79
       Model | -11533.8491         3 -3844.61635   Prob > F        =    0.0025
    Residual |  12734.4755     1,917  6.64291888   R-squared       =         .
-------------+----------------------------------   Adj R-squared   =         .
       Total |  1200.62643     1,920  .625326264   Root MSE        =    2.5774

------------------------------------------------------------------------------
    log_wage |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      school |  -1.132851   3.520394    -0.32   0.748    -8.037056    5.771353
         age |   .1101027   .2584701     0.43   0.670    -.3968095    .6170148
       feduc |   1.076487   2.970545     0.36   0.717    -4.749353    6.902327
       _cons |   10.11024    27.6234     0.37   0.714    -44.06484    64.28532
------------------------------------------------------------------------------
Instrumented:  school
Instruments:   age feduc mnbirth
------------------------------------------------------------------------------

. ivreg log_wage age feduc white (school=mnbirth)

Instrumental variables (2SLS) regression

      Source |       SS           df       MS      Number of obs   =     1,921
-------------+----------------------------------   F(4, 1916)      =      3.76
       Model | -11258.7788         4  -2814.6947   Prob > F        =    0.0047
    Residual |  12459.4052     1,916   6.5028211   R-squared       =         .
-------------+----------------------------------   Adj R-squared   =         .
       Total |  1200.62643     1,920  .625326264   Root MSE        =    2.5501

------------------------------------------------------------------------------
    log_wage |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      school |  -1.118775   3.464543    -0.32   0.747    -7.913447    5.675898
         age |   .1085514   .2536903     0.43   0.669    -.3889868    .6060895
       feduc |   1.056549   2.912836     0.36   0.717    -4.656114    6.769212
       white |    .251216   .4073529     0.62   0.538    -.5476857    1.050118
       _cons |   9.813916   26.94144     0.36   0.716    -43.02372    62.65155
------------------------------------------------------------------------------
Instrumented:  school
Instruments:   age feduc white mnbirth
------------------------------------------------------------------------------

. ivreg log_wage age feduc white married (school=mnbirth)

Instrumental variables (2SLS) regression

      Source |       SS           df       MS      Number of obs   =     1,921
-------------+----------------------------------   F(5, 1915)      =      3.63
       Model | -10074.8059         5 -2014.96117   Prob > F        =    0.0029
    Residual |  11275.4323     1,915   5.8879542   R-squared       =         .
-------------+----------------------------------   Adj R-squared   =         .
       Total |  1200.62643     1,920  .625326264   Root MSE        =    2.4265

------------------------------------------------------------------------------
    log_wage |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      school |  -1.056136   3.210372    -0.33   0.742    -7.352329    5.240057
         age |   .0996085   .2290983     0.43   0.664    -.3496998    .5489169
       feduc |    1.00464   2.700192     0.37   0.710    -4.290985    6.300266
       white |   .1983393    .332019     0.60   0.550    -.4528176    .8494962
     married |   .3222578   .4658258     0.69   0.489    -.5913214    1.235837
       _cons |   9.272226    24.8899     0.37   0.710    -39.54194    58.08639
------------------------------------------------------------------------------
Instrumented:  school
Instruments:   age feduc white married mnbirth
------------------------------------------------------------------------------

. 
. *Additional graphs

. graph pie, over(feduc) title (Distribution of Father's education)

. graph save Graph "H:\WageRegressionResults__2_FathersEduc.gph"
(file H:\WageRegressionResults__2_FathersEduc.gph saved)

. twoway (scatter wage age), title (Wage and Age)

. graph save Graph "H:\WageAndAge__2.gph"
(file H:\WageAndAge__2.gph saved)

. graph pie, over(majocc)

. graph save Graph "H:\PieChartMajor__2.gph"
(file H:\PieChartMajor__2.gph saved)

. *Analyze through interpreting coefficients and considering t-statistics

. *//Done

. save "H:\WageRegressionResults__2(dta).dta"
file H:\WageRegressionResults__2(dta).dta saved

. exit, clear
